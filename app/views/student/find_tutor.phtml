<?php $title = 'Find Tutor'; ?>
<div class="container mt-5">
    <h2>Find a Tutor</h2>
    <form method="GET" action="<?= BASE_URL ?>find_tutor.php" class="mb-3">
        <div class="input-group">
            <input type="text" name="q" class="form-control" placeholder="Search by name or subject"
                value="<?= htmlspecialchars($query ?? '') ?>">
            <button class="btn btn-primary" type="submit">Search</button>
        </div>
    </form>
    <?php if (empty($tutors)): ?>
        <p>No tutors found.</p>
    <?php else: ?>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th></th>
                    <th>Tutor</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <?php foreach ($tutors as $tutor): ?>
                    <tr>
                        <td class="text-center tutor-img-td">
                            <?php if (!empty($tutor['image'])): ?>
                                <img src="<?= BASE_URL ?>uploads/<?= $tutor['image'] ?>" alt="Tutor Image" width="100"
                                    class="tutor-table-img">
                            <?php endif; ?>
                        </td>
                        <td class="tutor-content-td">
                            <h3 class="mb-0"><?= htmlspecialchars($tutor['name']) ?></h3>
                            <p class="mb-0"><?= htmlspecialchars($tutor['subject']) ?></p>
                            <p class="mb-0"><?= htmlspecialchars($tutor['email']) ?></p>
                        </td>
                        <td>
                            <div class="d-flex gap-2 align-items-center">
                                <a href="<?= BASE_URL ?>request_tutor.php?id=<?= $tutor['tutor_id'] ?>"
                                    class="btn btn-sm btn-success">Request</a>
                                <a href="<?= BASE_URL ?>tutor_profile.php?id=<?= $tutor['tutor_id'] ?>"
                                    class="btn btn-sm btn-info">View</a>
                            </div>
                        </td>
                    </tr>
                <?php endforeach; ?>
            </tbody>
        </table>
    <?php endif; ?>
</div>